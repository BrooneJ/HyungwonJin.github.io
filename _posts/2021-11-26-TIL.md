---
layout: post
title: "211126-TIL(styled-components, typescript)"
subtitle: "TIL-211126"
categories: til
tags: til-2021-11
comments: false
---

![1-1](/assets/img/TIL.jpeg)

# Themeì´ë‘ typescriptë¥¼ ì—°ê²°í•˜ëŠ” ë°©ë²•(declaration(ì„ ì–¸) íŒŒì¼)

---

<https://styled-components.com/docs/api#typescript>

1. styled.d.ts ë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•œë‹¤.

   ```js
   // import original module declarations
   import "styled-components";
   // styled-componentsì— ìˆëŠ” DefaultThemeì„ í™•ì¥í•¨
   declare module "styled-components" {
     export interface DefaultTheme {
       textColor: string;
       bgColor: string;
     }
   }
   ```

   ê·¸ë¦¬ê³  ìê¸° í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ì„¸íŒ…ì„ í•œë‹¤.

2. theme.ts íŒŒì¼ì„ ë§Œë“ ë‹¤.

   ```js
   // ìœ„ì—ì„œ í™•ì¥í•œ ì‚¬í•­ì´ DefaultTheme ì•ˆì— ë“¤ì–´ ìˆìŒ
   import { DefaultTheme } from "styled-components";

   export const lightTheme: DefaultTheme = {
     bgColor: "white",
     textColor: "black",
   };
   export const darkTheme: DefaultTheme = {
     bgColor: "black",
     textColor: "white",
   };
   ```

   ì´ í•¨ìˆ˜ lightThemeê³¼ darkThemeì€ DefaultThemeì„ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì— DefaultThemeì—ì„œ ì„ ì–¸í•´ì£¼ì§€ ì•Šì€ ìš”ì†Œê°€ ìˆë‹¤ë©´ ì—ëŸ¬ê°€ ë°œìƒí•¨

   ```js
   export const darkTheme: DefaultTheme = {
     bgColor: "black",
     // ì´ëŸ° ì‹ìœ¼ë¡œ textColorë¥¼ ì„ ì–¸í–ˆìŒì—ë„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ ë°œìƒ
   };
   ```

3. index.tsxì—ì„œ ThemeProviderë¥¼ ë¶ˆëŸ¬ì™€ì„œ themeì„ ì ìš©

   ```js
   import React from "react";
   import ReactDOM from "react-dom";
   import { ThemeProvider } from "styled-components";
   import App from "./App";
   import { lightTheme } from "./theme";

   ReactDOM.render(
     <React.StrictMode>
       <ThemeProvider theme={lightTheme}>
         {" "}
         // propsë¡œ themeì„ ë„£ì„ ìˆ˜ ìˆìŒ
         <App />
       </ThemeProvider>
     </React.StrictMode>,
     document.getElementById("root")
   );
   ```

4. Appì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì“¸ ìˆ˜ ìˆìŒ

```js
import styled from "styled-components";

// ThemeProviderì—ì„œ ë°›ì€ propsì¸ themeì—ì„œ lightThemeì„ ì°¸ì¡°í•˜ê³ 
// lightThemeì˜ ìš”ì†Œì¸ bgColor, textColorë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
const Container = styled.div`
  background-color: ${(props) => props.theme.bgColor};
`;
const H1 = styled.h1`
  color: ${(props) => props.theme.textColor};
`;

function App() {
  return (
    <Container>
      <H1>Protected</H1>
    </Container>
  );
}

export default App;
```

# useParams

---

ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³´ë‚´ëŠ” paramsë¥¼ ë°›ëŠ” hooksì´ë‹¤.

ğŸ—‚ Router.tsx

```js
import {BrowserRouter, Switch, Route} from "react-router-dom";
...

function Router() {
  return (
    <BrowserRouter>
      <Switch>
        <Route path="/:coinId">
        // ì—¬ê¸°ì„œ ë³´ë‚´ëŠ” paramsë¥¼ Coin ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°›ì•„ë“¤ì¸ë‹¤.
          <Coin />
        </Route>
        ...
      </Switch>
    </BrowserRouter>
  );
}
export default Router;
```

ğŸ—‚ Coin.tsx

```js
import { useParams } from "react-router-dom";

interface RouteParams {
  coinId: string;
}

function Coin() {
  // paramsì— ìˆëŠ” coinIdë¥¼ ë°›ëŠ”ë‹¤.
  // typescriptì—ë„ ì£¼ì˜í•œë‹¤. êº½ì‡ ê´„í˜¸ì—ëŠ” ì¸í„°í˜ì´ìŠ¤ë‚˜ êµ¬ì¡°ë¶„í•´ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.
  // const {coinId} = useParams<{coinId:string}>();
  const { coinId } = useParams<RouteParams>();
  return <h1>Coin: {coinId}</h1>;
}

export default Coin;

```

ì¸í„°í˜ì´ìŠ¤ë‚˜ êµ¬ì¡°ë¶„í•´í• ë‹¹ìœ¼ë¡œ íƒ€ì…ì„ ì •ì˜í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì•ˆëœë‹¤.

# GlobalStyle

---

index.tsx ë‹¤ìŒìœ¼ë¡œ ìˆœìœ„ê°€ ë†’ì€ App.tsxì— ë°°ì¹˜í•œë‹¤.  
<https://cssdeck.com/blog/scripts/eric-meyer-reset-css/>

```js
import { createGlobalStyle } from "styled-components";
const GlobalStyle = createGlobalStyle`
  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400& display=swap');
  html, body, div, span, applet, object, iframe,
  h1, h2, h3, h4, h5, h6, p, blockquote, pre,
  a, abbr, acronym, address, big, cite, code,
  del, dfn, em, img, ins, kbd, q, s, samp,
  small, strike, strong, sub, sup, tt, var,
  b, u, i, center,
  dl, dt, dd, ol, ul, li,
  fieldset, form, label, legend,
  table, caption, tbody, tfoot, thead, tr, th, td,
  article, aside, canvas, details, embed,
  figure, figcaption, footer, header, hgroup,
  menu, nav, output, ruby, section, summary,
  time, mark, audio, video {
  	margin: 0;
  	padding: 0;
  	border: 0;
  	font-size: 100%;
  	font: inherit;
  	vertical-align: baseline;
  }
  /* HTML5 display-role reset for older browsers */
  article, aside, details, figcaption, figure,
  footer, header, hgroup, menu, nav, section {
  	display: block;
  }
  body {
  	line-height: 1;
  }
  ol, ul {
  	list-style: none;
  }
  blockquote, q {
  	quotes: none;
  }
  blockquote:before, blockquote:after,
  q:before, q:after {
  	content: '';
  	content: none;
  }
  table {
  	border-collapse: collapse;
  	border-spacing: 0;
  }
  `;
function App() {
  return (
    <>
      // GlobalStyleì„ ë¨¼ì € ì…ë ¥
      <GlobalStyle />
      <Router />
    </>
  );
}

export default App;
```

## component ë°˜ë³µí•˜ê¸°

---

Containerì•ˆì— Headerê³¼ CoinsListê°€ ìˆë‹¤.  
ê·¸ë¦¬ê³  CoinsList ì†ì—ì„œ mapì„ í†µí•´ì„œ coinë“¤ì˜ ëª©ë¡ì„ ë‚˜ì—´í•œë‹¤.

```js
const coins = [
  {
    id: "btc-bitcoin",
    name: "Bitcoin",
    symbol: "BTC",
    rank: 1,
    is_new: false,
    is_active: true,
    type: "coin",
  },
  {
    ...
  },
  {
    ...
  },
];
function Coins() {
  return (
    <Container>
      <Header>
        <Title>ì½”ì¸</Title>
      </Header>
      <CoinsList>
        {coins.map((coin) => (
          <Coin key={coin.id}>
            <Link to={`/${coin.id}`}>{coin.name} &rarr;</Link>
          </Coin>
        ))}
      </CoinsList>
    </Container>
  );
}
```

Linkì—ì„œ toë¥¼ ì£¼ì˜í•  ê²ƒ

## useStateì—ì„œ interface ë§Œë“¤ê¸°

---

useStateì—ì„œ interfaceë¥¼ ì–´ë–»ê²Œ ì‘ì„±í•˜ëŠ”ì§€ ê¸°ì–µí•´ë‘˜ ê²ƒ

```js
// fetch í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ë°ì´í„°ì˜ í˜•íƒœë¥¼ ë¯¸ë¦¬ typeì„ ê¸°ë¡í•´ë†“ìŒ
interface CoinInterface {
  id: string;
  name: string;
  symbol: string;
  rank: number;
  is_new: boolean;
  is_active: boolean;
  type: string;
}

function Coins() {
  // coinsì˜ ì²« ì„¸íŒ…ì€ ë¹ˆ arrayë¡œ ì„¤ì •
  // ê·¸ë¦¬ê³  useState<ì¸í„°í˜ì´ìŠ¤ ì´ë¦„, coinsê°€ ë°°ì—´ í˜•íƒœì´ë¯€ë¡œ []ì„ ì…ë ¥>([ì´ˆê¸°ì„¸íŒ…])
  const [coins, setCoins] = useState<CoinInterface[]>([]);
  const [loading, setLoading] = useState(true);
  useEffect(() => {
    (async () => {
      const response = await fetch("https://api.coinpaprika.com/v1/coins");
      const json = await response.json();
      setCoins(json.slice(0, 100));
      setLoading(false);
    })();
  }, []);
  return (
    ...
  )
```
