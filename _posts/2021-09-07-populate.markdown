---
layout: post
title:  "[MongoDB] populateë¥¼ í•œ ë‹¤ìŒ limitë¥¼ ì ìš©í•˜ê¸°"
subtitle:   "JS"
categories: develop
tags: back
comments: true
---
![1-1](/assets/img/web/mongodb.png)         
# ğŸŒŸ MongoDBì˜ populateë¥¼ í•œ ë‹¤ìŒ limitë¥¼ ì ìš©í•˜ê¸°
---
homeì—ì„œ ëª¨ë“  ë‹¨ì–´ë¥¼ ë°›ì•„ì˜¬ ë•ŒëŠ” populateë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì—ˆì§€ë§Œ userê°€ ê°€ì§€ê³  ìˆëŠ” ë‹¨ì–´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” populateê°€ í•„ìš”í–ˆê³  ì´ë–„ëŠ” limitë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì´ ì¢€ ë‹¬ëë‹¤.        
<br/>

âœ”ï¸ homeì—ì„œ limitë¥¼ ì“¸ ë•Œ
```js
export const loadPages = async (req, res) => {
    const { body: { pageCounter } } = req;
    const words = await Word.find({}).sort({ createdAt: "desc" }).limit(10).skip((pageCounter - 1) * 10);
    if (words.length === 0) {
        return res.sendStatus(404);
    }
    return res.status(201).json({ words });
}
```

âœ”ï¸ mypageì—ì„œ limitë¥¼ ì“¸ ë•Œ
```js
export const mypageLoading = async (req, res) => {
    const { body: { pageCounter } } = req;
    const { id } = req.params;
    const wordsData = await User.findById(id).populate({ // populateë¥¼ ì‚¬ìš©
        path: "words", // ê°€ì ¸ì˜¬ model
        options: {
            sort: {
                createdAt: "desc"
            },
            limit: 10,
            skip: (pageCounter - 1) * 10,
        }
    });
    if (wordsData.words.length === 0) {
        return res.sendStatus(404);
    }
    return res.status(201).json({ words: wordsData.words });
}
```
ìœ„ì˜ ì½”ë“œ ì²˜ëŸ¼ optionsë¥¼ ì„¤ì •í•´ì£¼ë©´ limitë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.     

<https://stackoverflow.com/questions/32207457/node-js-mongoose-populate-limit>      
ì´ ê¸€ì„ ì°¸ê³ í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.      
