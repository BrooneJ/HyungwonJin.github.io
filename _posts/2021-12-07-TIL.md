---
layout: post
title: "211207-TIL(Recoil)"
subtitle: "TIL-211207"
categories: til
tags: til-2021-12
comments: false
---

![1-1](/assets/img/TIL.jpeg)

# selector setì— ëŒ€í•˜ì—¬

---

ğŸ—‚ App.tsx

```js
function App() {
  const [minutes, setMinutes] = useRecoilState(minuteState);
  //   const hours = useRecoilValue(hourSelector);
  const [hours, setHours] = useRecoilState(hourSelector); // selectì´ì§€ë§Œ atomì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒê³¼ í˜•íƒœê°€ ê°™ë‹¤. ì²«ë²ˆì§¸ëŠ” ê°’ì´ê³  ë‘ë²ˆì§¸ëŠ” atomì„ ìˆ˜ì •í•˜ëŠ” í•¨ìˆ˜ì´ê±°ë‚˜ selectorì˜ set propertyë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í•¨ìˆ˜ì´ë‹¤.
  const onMinutesChange = (event: ReactFormEvent<HTMLInputElements>) => {
    setMinutes(+event.currentTarget.value); // string -> numberë¡œ ë§Œë“œëŠ” ê°„ë‹¨í•œ ë°©ë²•ì€ ì•ì— +ë¥¼ ë¶™ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.
  };
  const onHoursChange = (event: React.FormEvent<HTMLInputElements>) => {
    setHours(+event.currentTarget.value);
  };
  return (
    <div>
      <input
        value={minutes}
        onChange={onMinutesChange}
        type="number"
        placeholder="Minutes"
      />
      <input
        value={hours}
        onChange={onHoursChange}
        type="number"
        placeholder="Hours"
      />
    </div>
  );
}
```

ğŸ—‚ atoms.tsx

```js
import { atom, selector } from "recoil";

export const minuteState = atom({
  key: "minutes",
  default: 0,
});

export const hourSelector = selector(<number>)({
  key: "hours",
  get: ({ get }) => {
    const minutes = get(minuteState);
    return minutes / 60;
  },
  set: ({ set }, newValue) => { // newValueëŠ” App.tsxì—ì„œ hoursì˜ ê°’ì„ ë§í•œë‹¤.
      const minutes = Number(newValue) * 60;
      set(minuteState, minutes); // (ìˆ˜ì •í•˜ê³  ì‹¶ì€ recoil atom, ìˆ˜ì •í•  ìƒˆë¡œìš´ ê°’)
  },
});
```

setì˜ ì²«ë²ˆì§¸ëŠ” SetRecoilStateë¡œ ìˆ˜ì •í•  atomì„ ì„¤ì •í•œë‹¤. ê·¸ë¦¬ê³  ë‘ë²ˆì§¸ë¡œ ìˆ˜ì •í•  ê°’ì„ ë„£ëŠ”ë‹¤.

useRecoilStateì˜ ì¸ìê°€ selectorì´ê³  setì„ ê°€ì§ˆ ê²½ìš° [value, setValue]ì—ì„œ setValueëŠ” setì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.
