---
layout: post
title: "210909-TIL(heroku)"
subtitle: "TIL-210909"
categories: til
tags: til-2021-09
comments: false
---

## ğŸŒŸ ë°°í¬ ì¤€ë¹„

---

1. babel/cliì„ ë°›ëŠ”ë‹¤.

   ```
   npm i --save-dev @babel/core @babel/cli
   ```

2. ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜ì •í•œë‹¤.  
   ğŸ—‚ package.json

   ```js
   "scripts": {
       "build:server": "babel src -d build",
       // -d buildì˜ ì˜ë¯¸ëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì–´ë””ë¡œ í•  ê²ƒì¸ì§€ ë¬»ëŠ” ê²ƒ
       ...
     },
   ```

   ì´ë ‡ê²Œ ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ build í´ë”ê°€ ìƒì„±ëœë‹¤.  
   ![1-1](/assets/img/web/2021-09-09/1-1.png)

3. start ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì„¤ì •

   ```js
   "scripts": {
       "start": "node build/init.js",
       "build:server": "babel src -d build",
       ...
   },
   ```

   ê·¸ë¦¬ê³  npm startë¥¼ ì‹ ë‚˜ëŠ” ë§ˆìŒìœ¼ë¡œ ì‹¤í–‰í•˜ë©´...!!!  
   ![1-1](/assets/img/web/2021-09-09/1-2.png)  
   ìœ„ì™€ ê°™ì€ regenerator-runtime errorê°€ ëœ¬ë‹¤.  
   ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ

   ```
   npm i regenerator-runtime
   ```

   npmì„ í†µí•´ì„œ regenerator-runtimeë¥¼ ì„¤ì¹˜í•˜ê³ 

   ğŸ—‚ src/init.js

   ```js
   import "regenerator-runtime";
   ```

   regenerator-runtimeë¥¼ init.js ìµœìƒë‹¨ì— ë¶ˆëŸ¬ì˜¤ê³ ë‚˜ì„œ ë‹¤ì‹œ npm startë¥¼ ì‹¤í–‰í•˜ë©´  
   ![1-1](/assets/img/web/2021-09-09/1-3.png)  
   ì˜¬ë°”ë¥´ê²Œ ì‹¤í–‰ëœë‹¤.

4. webpack ìˆ˜ì •  
   webpack.config.jsì— ì íŒ mode: developmentë¥¼ ì§€ìš°ê³  package.jsonì— ì ì–´ì¤Œ
   ```js
   "scripts": {
       "build:assets": "webpack --mode=production",
       "dev:assets": "webpack --mode=development -w"
   },
   ```
   5. ìµœì¢…ì ìœ¼ë¡œ build í•´ì¤„ scriptì…ë ¥
   ```js
   "scripts": {
       "start": "node build/init.js",
       "build": "npm run build:server && npm run build:assets",
       "build:server": "babel src -d build",
       "build:assets": "webpack --mode=production",
       "dev:server": "nodemon",
       "dev:assets": "webpack --mode=development -w"
   },
   ```
   ì°¸ê³ : <https://webpack.js.org/api/cli/>

## ğŸŒŸ Herokuì— ì˜¬ë¦¬ëŠ” ë°©ë²•

---

1. herokuì— ë“¤ì–´ê°€ì„œ app ë§Œë“¤ê¸°ë¥¼ í•œë‹¤. ê·¸ë¦¬ê³  heroku clië¥¼ ì„¤ì¹˜í•œë‹¤.
   ```
   heroku git:clone -a dailywords-hw
   ```
2. buildë¥¼ í•´ì„œ webì—ì„œ ì‹¤í–‰ë  ì½”ë“œë¥¼ ë§Œë“ ë‹¤.

   ```
   npm run build
   ```

3. ê·¸ë¦¬ê³  í˜„ì¬ ì§„í–‰ë˜ê³  ìˆëŠ” logë¥¼ ë³´ê¸°ìœ„í•´ì„œ
   ```
   heroku logs --tail
   ```
4. ê·¸ ë‹¤ìŒ ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•´ì„œ herokuë¡œ ë¹Œë“œ
   ```
   git push heroku master
   ```
5. ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ ë°œìƒ  
   ![1-1](/assets/img/web/2021-09-09/1-4.png)  
   mongoDBì—ì„œ ì‚¬ìš©í•  keyê°€ .envì— ë“¤ì–´ìˆëŠ”ë° gitì—ëŠ” .envê°€ ì—…ë¡œë“œ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œ

   ![1-1](/assets/img/web/2021-09-09/1-5.png)  
   herokudì—ì„œ settingíƒ­ì—ì„œ Config Varsì— .envì— ë“¤ì–´ê°€ìˆëŠ” ê°’ë“¤ì„ ì…ë ¥í•´ì¤€ë‹¤.

6. githubì™€ heroku ì—°ê²°  
   ![1-1](/assets/img/web/2021-09-09/1-6.png)  
   ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ì„¸íŒ…í•´ì„œ git push origin masterë¥¼ í•˜ë©´ ë°”ë¡œ herokuê°€ ë°˜ì˜í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ì¤€ë‹¤.

â›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸâ›°  
<br/>
