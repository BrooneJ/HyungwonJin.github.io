---
layout: post
title: "211202-TIL"
subtitle: "TIL-211202"
categories: til
tags: til-2021-12
comments: false
---

![1-1](/assets/img/TIL.jpeg)

# Recoil ì‚¬ìš©í•˜ê¸°

---

ê°€ì¥ ë¨¼ì§€ atoms.tsë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì¤€ë‹¤.

ğŸ—‚ atoms.ts

```js
import { atom } from "recoil";

export const isDarkAtom = atom({
  key: "isDark",
  default: true,
});
```

ì´ íŒŒì¼ì—ì„œëŠ” ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©ë  ìƒíƒœê´€ë¦¬í•  ìš”ì†Œë“¤ì„ ëª¨ì•„ì„œ ê´€ë¦¬í•œë‹¤.

ğŸ—‚ index.tsx  
indexì—ì„œ Recoilì„ ë¶ˆëŸ¬ì˜¨ë‹¤.

```js
import { RecoilRoot } from "recoil";
ReactDOM.render(
  <React.StrictMode>
    <RecoilRoot>
      <QueryClientProvider client={queryClient}>
        <App />
      </QueryClientProvider>
    </RecoilRoot>
  </React.StrictMode>,
  document.getElementById("root")
);
```

ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ RecoilBootë¥¼ ë¶ˆëŸ¬ì„œ ê°ì‹¸ì¤€ë‹¤.  
ê·¸ë¦¬ê³  App.tsxë¡œ ê°€ì„œ

ğŸ—‚ App.tsx

```js
import { useRecoilValue } from "recoil";
import { isDarkAtom } from "./atoms";

function App() {
  const isDark = useRecoilValue(isDarkAtom);
  return (
    <>
      <ThemeProvider theme={isDark ? darkTheme : lightTheme}>
        <GlobalStyle />
        <Router />
        <ReactQueryDevtools initialIsOpen={true} />
      </ThemeProvider>
    </>
  );
}

export default App;
```

useRecoilValueë¥¼ ë¶ˆëŸ¬ì˜¤ê³  isDarkAtomì„ ë¶ˆëŸ¬ì˜¨ ë’¤ ë³€ìˆ˜ì— í• ë‹¹í•œë‹¤.  
ì´ë•Œ ë³€ìˆ˜ì˜ ê°’ì— ì˜í•´ì„œ ThemeProviderì—ì„œ themeì„ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.

# ìƒíƒœ ê°’ì„ ë³€ê²½í•˜ëŠ” ë°©ë²•

---

ğŸ—‚ Coins.tex

```js
import { useSetRecoilState } from "recoil";
import { isDarkAtom } from "../atoms";

function Coins() {
  const setDarkAtom = useSetRecoilState(isDarkAtom);
  const toggleDarkAtom = () => setDarkAtom((prev) => !prev);
  return (
    <Container>
      <Header>
        <Title>ì½”ì¸</Title>
        <button onClick={toggleDarkAtom}>Toggle Mode</button>
      </Header>
    </Container>
  );
}

export default Coins;
```

useSetRecoilStateëŠ” useStateê³¼ ë¹„ìŠ·í•˜ë‹¤.
setDarkAtomì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì´ë¥¼ prevë¼ëŠ” ì´ì „ ìš”ì†Œë¥¼ ì¹­í•˜ëŠ” ë³€ìˆ˜ë¥¼ í†µí•´ì„œ ìƒíƒœë¥¼ ë°”ê¿”ì¤„ ìˆ˜ ìˆë‹¤.
